<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Arabic Flashcard Maker - Modern</title>
    <!-- Google Fonts for a clean look -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
    />
    <style>
      /* Basic Reset & Global Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(45deg, #ffecd2, #fcb69f);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem 1rem;
        color: #333;
      }

      h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        text-align: center;
        color: #2f3542;
        font-weight: 700;
      }

      /* Container for the form and cards */
      .container {
        max-width: 900px;
        width: 100%;
      }

      /* Modern Card Form */
      .flashcard-form {
        background: #ffffffee;
        backdrop-filter: blur(5px);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .flashcard-form label {
        font-weight: 600;
      }
      .flashcard-form input {
        padding: 0.7rem;
        font-size: 1rem;
        border: 2px solid #f0f0f0;
        border-radius: 8px;
        width: 100%;
        outline: none;
        transition: border 0.3s ease;
      }
      .flashcard-form input:focus {
        border-color: #ffa502;
      }
      .flashcard-form button {
        align-self: flex-start;
        cursor: pointer;
        padding: 0.7rem 1.25rem;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        background-color: #ffa502;
        color: #fff;
        font-weight: 600;
        transition: background-color 0.3s ease;
      }
      .flashcard-form button:hover {
        background-color: #ff7f50;
      }

      /* Flashcards Grid */
      .flashcards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 1.5rem;
      }

      /* Flip Card Container */
      .flip-card {
        perspective: 1000px; /* Allows the 3D flip effect */
      }
      .flashcard {
        position: relative;
        width: 100%;
        height: 320px;
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }
      .flashcard:hover {
        /* You can uncomment this for hover-based flip,
         or keep it flipped on click using JS events.
         transform: rotateY(180deg); 
      */
      }

      /* Front & Back Faces */
      .flashcard-face {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 12px;
        background-color: #fff;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .flashcard-front {
        background-color: #ffffff;
      }
      .flashcard-back {
        background-color: #ffffff;
        transform: rotateY(180deg);
      }

      /* Flashcard Content */
      .image-container {
        width: 100%;
        height: 60%;
        overflow: hidden;
        background: #f2f2f2;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
      }
      .arabic-word {
        font-size: 1.6rem;
        font-weight: 700;
        color: #ff4757;
        margin-top: 1rem;
        text-align: center;
      }
      .meaning {
        font-size: 1.1rem;
        margin: 1.5rem 1rem;
        color: #2f3542;
        text-align: center;
      }

      /* Buttons (Edit / Delete) */
      .btns {
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        position: absolute;
        bottom: 1rem;
      }
      .btn-edit,
      .btn-delete {
        padding: 0.4rem 0.8rem;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        transition: 0.2s;
      }
      .btn-edit {
        background-color: #2ed573;
        color: #fff;
      }
      .btn-edit:hover {
        background-color: #20bf6b;
      }
      .btn-delete {
        background-color: #ff4757;
        color: #fff;
      }
      .btn-delete:hover {
        background-color: #e84118;
      }

      /* When flipped, rotate the flashcard */
      .flipped {
        transform: rotateY(180deg);
      }

      /* Responsive Adjustments */
      @media (max-width: 600px) {
        .flashcard {
          height: 280px;
        }
      }
    </style>
  </head>

  <body>
    <h1>Arabic Flashcard Maker</h1>
    <div class="container">
      <!-- Flashcard Form -->
      <form class="flashcard-form" id="flashcardForm">
        <label for="arabicWord">Arabic Word</label>
        <input type="text" id="arabicWord" required placeholder="مثال: كتاب" />

        <label for="meaning">Meaning</label>
        <input type="text" id="meaning" required placeholder="Example: Book" />

        <label for="imageUrl">Image URL</label>
        <input type="text" id="imageUrl" placeholder="Optional image link" />

        <button type="submit" id="saveBtn">Add Flashcard</button>
      </form>

      <!-- Flashcards Grid -->
      <div class="flashcards-grid" id="flashcardsGrid"></div>
    </div>

    <script>
      const flashcardForm = document.getElementById("flashcardForm");
      const arabicWordInput = document.getElementById("arabicWord");
      const meaningInput = document.getElementById("meaning");
      const imageUrlInput = document.getElementById("imageUrl");
      const flashcardsGrid = document.getElementById("flashcardsGrid");
      const saveBtn = document.getElementById("saveBtn");

      let flashcards = [];
      let editIndex = null; // track which card is being edited

      // Load existing flashcards from localStorage on page load
      window.addEventListener("load", () => {
        const storedCards = localStorage.getItem("modernArabicFlashcards");
        if (storedCards) {
          flashcards = JSON.parse(storedCards);
        }
        renderFlashcards();
      });

      // Handle form submission: Add or Update card
      flashcardForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const newCard = {
          arabicWord: arabicWordInput.value.trim(),
          meaning: meaningInput.value.trim(),
          imageUrl: imageUrlInput.value.trim() || "",
        };

        // If we are editing an existing card, update it
        if (editIndex !== null) {
          flashcards[editIndex] = newCard;
          editIndex = null;
          saveBtn.textContent = "Add Flashcard";
        } else {
          // Otherwise, add a new card
          flashcards.push(newCard);
        }

        // Update local storage
        localStorage.setItem(
          "modernArabicFlashcards",
          JSON.stringify(flashcards)
        );

        // Re-render and reset form
        renderFlashcards();
        flashcardForm.reset();
      });

      // Render flashcards in the grid
      function renderFlashcards() {
        flashcardsGrid.innerHTML = "";

        flashcards.forEach((card, index) => {
          // Flip-card container
          const flipCardContainer = document.createElement("div");
          flipCardContainer.classList.add("flip-card");

          // The main flashcard
          const cardDiv = document.createElement("div");
          cardDiv.classList.add("flashcard");

          // FRONT FACE
          const frontFace = document.createElement("div");
          frontFace.classList.add("flashcard-face", "flashcard-front");

          // Image container on the front
          const imageContainer = document.createElement("div");
          imageContainer.classList.add("image-container");
          if (card.imageUrl) {
            const img = document.createElement("img");
            img.src = card.imageUrl;
            img.alt = "Flashcard Image";
            imageContainer.appendChild(img);
          } else {
            imageContainer.textContent = "No Image";
          }

          // Arabic word text
          const arabicWordEl = document.createElement("div");
          arabicWordEl.classList.add("arabic-word");
          arabicWordEl.textContent = card.arabicWord;

          frontFace.appendChild(imageContainer);
          frontFace.appendChild(arabicWordEl);

          // BACK FACE
          const backFace = document.createElement("div");
          backFace.classList.add("flashcard-face", "flashcard-back");

          // Show the meaning on the back
          const meaningEl = document.createElement("div");
          meaningEl.classList.add("meaning");
          meaningEl.textContent = card.meaning;

          backFace.appendChild(meaningEl);

          // Add the card faces to the flashcard
          cardDiv.appendChild(frontFace);
          cardDiv.appendChild(backFace);

          // Event listener to flip the card on click
          cardDiv.addEventListener("click", () => {
            // Only flip if the click isn't on a button
            if (event.target.tagName.toLowerCase() !== "button") {
              cardDiv.classList.toggle("flipped");
            }
          });

          // Buttons: Edit / Delete
          const btnsDiv = document.createElement("div");
          btnsDiv.classList.add("btns");

          const editBtn = document.createElement("button");
          editBtn.classList.add("btn-edit");
          editBtn.textContent = "Edit";
          editBtn.addEventListener("click", (event) => {
            event.stopPropagation(); // prevent flipping if the button is clicked
            editIndex = index;
            arabicWordInput.value = card.arabicWord;
            meaningInput.value = card.meaning;
            imageUrlInput.value = card.imageUrl;
            saveBtn.textContent = "Update Flashcard";
          });

          const deleteBtn = document.createElement("button");
          deleteBtn.classList.add("btn-delete");
          deleteBtn.textContent = "Delete";
          deleteBtn.addEventListener("click", (event) => {
            event.stopPropagation(); // prevent flipping if the button is clicked
            flashcards.splice(index, 1);
            localStorage.setItem(
              "modernArabicFlashcards",
              JSON.stringify(flashcards)
            );
            renderFlashcards();
          });

          btnsDiv.appendChild(editBtn);
          btnsDiv.appendChild(deleteBtn);

          // Position the buttons in front face so they are accessible
          frontFace.appendChild(btnsDiv);

          // Put the flashcard inside the flip-card container
          flipCardContainer.appendChild(cardDiv);

          // Finally, add to the grid
          flashcardsGrid.appendChild(flipCardContainer);
        });
      }
    </script>
  </body>
</html>
